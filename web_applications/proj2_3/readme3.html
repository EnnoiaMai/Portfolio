<!DOCTYPE html>
<!--
Thuc Nguyen
Date Created: December 2017
-->
<html>
    <head>
        <title>Project 3 - Marathon (Server-side)</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <meta name="description" content="Enn's Portfolio">
        <meta name="author" content="Enn">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Open+Sans|Source+Sans+Pro" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../../css/readme.css">
        <link rel="stylesheet" type="text/css" href="../../css/sidebar.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript" src="../../js/sidebar.js"></script>
        <script type="text/javascript" src="../../js/readme.js"></script>
    </head>

    <body>
        <div>
            <div id="sidebar">
                <ul>
                    <li><a href="../../index.html" id="link_home">Home</a></li>
                    <li><a href="../../html/projects.html" id="link_projects">Projects</a></li>
                    <div id="submenu">
                        <a href="../../html/languages_and_syntax.html" id="link_languages_and_syntax">Languages and Syntax</a>
                        <div>
                            <img src="../../images/open_submenu.png" alt="open">
                        </div>
                    </div>
                    <li id="submenu_links">
                        <ul>
                            <li><a href="../../html/syntax_java.html" id="link_syntax_java">Java</a></li>
                            <li><a href="../../html/syntax_swift_4.html" id="link_syntax_swift">Swift 4.0</a></li>
                            <li><a href="../../html/syntax_cpp.html" id="link_syntax_cpp">C/C++</a></li>
                            <li><a href="../../html/syntax_html.html" id="link_syntax_html">HTML</a></li>
                            <li><a href="../../html/syntax_css.html" id="link_syntax_css">CSS</a></li>
                            <li><a href="../../html/syntax_javascript.html" id="link_syntax_js">JavaScript</a></li>
                            <li><a href="../../html/syntax_jquery.html" id="link_syntax_jquery">JQuery</a></li>
                            <li><a href="../../html/syntax_ajax.html" id="link_syntax_ajax">AJAX</a></li>
                            <li><a href="../../html/syntax_php.html" id="link_syntax_php">PHP</a></li>
                            <li><a href="../../html/syntax_perl.html" id="link_syntax_perl">Perl</a></li>
                            <li><a href="../../html/syntax_mysql.html" id="link_syntax_mysql">MySQL</a></li>
                            <li><a href="../../html/syntax_python.html" id="link_syntax_python">Python</a></li>
                            <li><a href="../../html/syntax_bash.html" id="link_syntax_bash">Bash</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="content_container">
                <div class="header" id="header_cs545">
                    <h1>Project 3 - Marathon (Server-side)</h1>
                </div>

                <div class="content">
                    <div class="section">
                        <h2>Assignment Details</h2>
                        <p>The second part of a two-part assignment which will use AJAX, PHP, and MySQL to build the application. Aside from AJAX which requires code on both the client and server side, most of this part of the assignment focuses on server-side code, validation, and connection and insertions to a database.The following are required features that the website must include:</p>
                        <br>
                        <ul>
                            <li><b>AJAX</b> to verify that the form and thus the user is unique and isn't a duplicate.</li>
                            <li>A <b>PHP script</b> that reads parameters coming from the form and stores it in a MySQL database.</li>
                            <li>The <b>runner's image</b> must be uploaded and stored on the server, not the database. Instead, store the name of the image on the database.</li>
                            <li>A <b>report</b> that acts as a roster of the participants. The roster must be grouped by age category, and alphabetized by last name. The report must include the following:</li>
                            <ol>
                                <li>Runner's last name and first name</li>
                                <li>Runner's image</li>
                                <li>Runner's age relative to the time the report was accessed</li>
                                <li>Runner's experience level</li>
                                <li>Report must be password-protected and accessible after signing in</li>
                            </ol>
                            <li>A <b>confirmation page</b></li>
                        </ul>
                        <br>
                        <p>The finished product along with the first part of this assignment will have the following:</p>
                        <ul>
                            <li>Landing page (index.html)</li>
                            <li>Enrollment Form (HTML)</li>
                            <li>Confirmation page (PHP)</li>
                            <li>Error page or message (PHP)</li>
                            <li>Signin Screen for the Roster Report</li>
                            <li>Roster Report</li>
                        </ul>
                        <br>
                        <p>The Roster Report must be password-protected and can only be accessed through a signin screen with a single text field for the password. There must be at least 3 distinct passwords, one of which must be 'cs545'. The passwords must be encrypted and stored in a text file on the server. An error message should be displayed if the password entered was incorrect. The report should load if the password is correct.</p>
                    </div>

                    <div class="section">
                        <h2>Additional Notes</h2>
                        <p>To debug and view all the printed errors, visit <a href="jadran.sdsu.edu/perl/apache_error_log.cgi" class="cs545_link">jadran.sdsu.edu/perl/apache_error_log.cgi</a></p>
                        <br>
                        <h4>Duplication check using AJAX and PHP, PHP Validation and Submission</h4>
                        <ul>
                            <li>An alternative to printing a confirmation page is to send back an AJAX string and display to the user that he/she is now registered.</li>
                            <li>To find duplicates using AJAX and PHP, use both the email address and the phone number for comparison. Duplicates must be checked for in both the HTML with JS enabled (by using AJAX) and the HTML returned by PHP. In order to see if the duplication check is working, you can submit the user information, click back to return to the validation page, and then click submit again.</li>
                            <li>Use a busywait icon to tell the user that the form is being processed when waiting for the AJAX response to check for duplicates and when uploading the runner's image.</li>
                            <li>Don't explicitly call the handler that is called when there is an AJAX response.</li>
                            <li>Whatever the user inputted, repopulate the form with that information after the submit button is clicked.</li>
                            <li> The report should print out information stored on the database.</li>
                        </ul>
                        <br>

                        <h4>Database, Formatting tables, and Querying</h4>
                        <ul>
                            <li>Index and primary keys are unnecessary for this project, only add this when you have a lot of users. For example, your SDSU RedID is a primary key.</li>
                            <li>Put enough data into the table that are different values. Should have enough teens, adults, and seniors.</li>
                            <li>Inserting into the database, creating a report, and checking for duplicates would be implemented in different PHP files.</li>
                            <li>Close the connection opened to the database or else it will be orphaned.</li>
                            <li>In reality, you would use a thread pool and have connectors open all the time and spawn more threads if needed or if more than the one thread is being recycled.</li>
                        </ul>
                        <br>

                        <h4>Logging into jadran to user the database on opatija server</h4>
                        <p>
                            Log into jadran <br>
                            The following command looks up the user and gives you the password<br>
                            GetMySQLPassword</p>
                        <br>
                        <p>Connect to the database on opatija using the following commands. It gives you a command line in MySQL client on opatija. Then you can create tables and make changes to the database. Database name is your account number.</p>
    <pre><code>
    // On jadrn sevrer
    mysql -u jadrnxxx -h opatija -p

    // On opatija
    USE jadrnxxx;
    SHOW tables;
    DESCRIBE table_name;
    </code></pre>
                        <br>

                        <h4>Making a table with MySQL (Better to redirect this into MySQL)</h4>
    <pre><code>
    USE jadrnxxx;
    DROP TABLE IF EXISTS person;
    CREATE TABLE person(
        id int AUTO_INCREMENT PRIMARY KEY,  -- don't need this
        name varchar(50) NOT NULL,          -- can't be blank
        address varchar(100) NOT NULL,
        city varchar(30) NOT NULL,
        state char(2) NOT NULL,
        zip char(5) NOT NULL,
        email varchar(50) NOT NULL
    );
    INSERT INTO person VALUES(0, 'Jim Robeson', '3456 Market St', 'San Diego', 'CA', '92104');
    ...
    </code></pre>
                        <br>

                        <h4>Echo a text file containing the SQL commands into a database</h4>
                        <ul>
                            <li>Allows you to start a clean table for testing or debugging.</li>
                        </ul>
    <pre><code>
    // Redirects from text file to MySQL
    mysql -u jadrnxxx -h opatija -p < make_person_table.txt
    </code></pre>
                        <br>

                        <h4>Running PHP on terminal</h4>
    <pre><code>
    php file.php
    </code></pre>
                    </div>

                    <div class="section">
                        <h2>Project Details</h2>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
